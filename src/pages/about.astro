---
import Header from "@/components/astro/Header.astro";
import { Github, ExternalLink, Heart, Sparkles, ShieldAlert, BookOpen, ChevronDown } from "lucide-react";
import '../styles/global.css';

const title = "About - CaitVi Hub";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body class="bg-black text-white overflow-hidden">
    
    {/* Fixed Header */}
    <div class="fixed top-0 left-0 w-full z-50">
      <Header />
    </div>

    {/* Main Scroll Container */}
    <main id="scroller" class="h-screen w-full overflow-y-scroll snap-y snap-mandatory scroll-smooth">
      
      {/* --- SECTION 1: HERO --- */}
      <section id="section-hero" class="section-panel h-screen w-full snap-start relative flex items-center justify-center overflow-hidden" data-parallax-type="zoom-out">
        {/* Background Layer */}
        <div class="parallax-bg absolute inset-[-100px] bg-[url('/images/home_bg_back.jpeg')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-black/50"></div>

        {/* Content */}
        <div class="relative z-10 text-center px-6 max-w-4xl space-y-8">
          <h1 class="text-5xl md:text-8xl font-serif font-bold tracking-tight drop-shadow-2xl content-animate" style="--delay: 0.1s">
            About <span class="text-transparent bg-clip-text bg-linear-to-r from-[#EF7627] to-[#D462A6]">CaitVi Hub</span>
          </h1>
          <p class="text-white/80 text-xl md:text-2xl font-light leading-relaxed max-w-2xl mx-auto drop-shadow-md content-animate" style="--delay: 0.3s">
            A curated sanctuary for the bond that defies Piltover's laws and Zaun's chaos.
          </p>
        </div>

        {/* Scroll Hint */}
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white/40 content-animate" style="--delay: 0.6s">
          <span class="text-xs uppercase tracking-widest">Scroll</span>
          <ChevronDown className="size-6 animate-bounce" />
        </div>
      </section>

      {/* --- SECTION 2: ORIGIN STORY --- */}
      <section id="section-origin" class="section-panel h-screen w-full snap-start relative flex items-center overflow-hidden" data-parallax-type="pan-right">
        {/* Background Layer */}
        <div class="parallax-bg absolute inset-[-100px] bg-[url('/images/home_bg_front.jpeg')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-linear-to-r from-black/95 via-black/70 to-black/30"></div>

        {/* Content (Left Aligned) */}
        <div class="relative z-10 w-full max-w-7xl mx-auto px-6 md:px-12">
          <div class="max-w-xl space-y-8 p-8 md:p-12 bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 shadow-2xl content-animate" style="--delay: 0.2s">
            <div class="flex items-center gap-3 text-[#D462A6]">
              <Sparkles className="size-6" />
              <span class="text-sm font-bold uppercase tracking-widest">Our Origin</span>
            </div>
            <h2 class="text-4xl md:text-5xl font-serif font-bold leading-tight">
              More Than Just Ships
            </h2>
            <div class="space-y-6 text-lg text-white/70 leading-relaxed">
              <p>
                It started with a simple obsession. The chemistry between a Piltovian Enforcer and a Zaunite Brawler wasn't just sparks—it was a revolution.
              </p>
              <p>
                CaitVi Hub was built to curate the finest fanworks, creating a space where the "Oil and Water" dynamic is celebrated in all its complexity.
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* --- SECTION 3: JOIN & LEGAL --- */}
      <section id="section-join" class="section-panel h-screen w-full snap-start relative flex flex-col items-center justify-center overflow-hidden" data-parallax-type="zoom-in">
        {/* Background Layer */}
        <div class="parallax-bg absolute inset-[-100px] bg-[url('/images/home_bg_back.jpeg')] bg-cover bg-center opacity-40"></div>
        <div class="absolute inset-0 bg-black/70"></div>

        {/* Content */}
        <div class="relative z-10 w-full max-w-5xl px-6 space-y-16">
          
          {/* Join Card */}
          <div class="text-center space-y-8 content-animate" style="--delay: 0.2s">
            <div class="size-24 mx-auto bg-white/10 rounded-full flex items-center justify-center backdrop-blur-xl border border-white/20 shadow-[0_0_60px_rgba(212,98,166,0.3)]">
              <Github className="size-12 text-white" />
            </div>
            <h2 class="text-4xl md:text-6xl font-serif font-bold">Join the Resistance</h2>
            <p class="text-xl text-white/60 max-w-2xl mx-auto leading-relaxed">
              Developers, writers, dreamers. This project is open source.<br/>
              Help us build the ultimate sanctuary.
            </p>
            <a 
              href="https://github.com/tubring25/caitvi-hub" 
              target="_blank" 
              rel="noopener noreferrer"
              class="inline-flex items-center gap-3 px-10 py-5 bg-white text-black text-lg font-bold rounded-full hover:bg-white/90 hover:scale-105 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)]"
            >
              Star on GitHub
              <ExternalLink className="size-5" />
            </a>
          </div>

          {/* Legal Footer */}
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 pt-12 border-t border-white/10 text-sm text-white/40 content-animate" style="--delay: 0.5s">
            <div class="text-center md:text-left">
              <h3 class="font-bold text-white/60 mb-3 uppercase tracking-wider flex items-center justify-center md:justify-start gap-2">
                <BookOpen className="size-4"/> Disclaimer
              </h3>
              <p>Fan-made recommendation platform. No files hosted. All links redirect to original sources.</p>
            </div>
            <div class="text-center md:text-left">
              <h3 class="font-bold text-white/60 mb-3 uppercase tracking-wider flex items-center justify-center md:justify-start gap-2">
                <Heart className="size-4"/> Source
              </h3>
              <p>Metadata sourced from <a href="https://archiveofourown.org/" class="underline hover:text-white transition-colors">AO3</a>. Rights belong to authors.</p>
            </div>
            <div class="text-center md:text-left">
              <h3 class="font-bold text-white/60 mb-3 uppercase tracking-wider flex items-center justify-center md:justify-start gap-2">
                <ShieldAlert className="size-4"/> IP Rights
              </h3>
              <p>Arcane © Riot Games & Fortiche. Non-commercial use only.</p>
            </div>
          </div>

        </div>
        
        {/* Footer Line */}
        <div class="absolute bottom-6 w-full text-center text-xs text-white/20">
          &copy; {new Date().getFullYear()} CaitVi Hub. Made with ❤ for Caitlyn & Vi.
        </div>
      </section>

    </main>

  </body>
</html>

<script>
  const scroller = document.getElementById('scroller');
  const sections = document.querySelectorAll('.section-panel');
  
  // Parallax effect based on scroll position
  function updateParallax() {
    const scrollTop = scroller?.scrollTop ?? 0;
    const viewportHeight = window.innerHeight;
    
    sections.forEach((section, index) => {
      const sectionTop = index * viewportHeight;
      const offset = scrollTop - sectionTop;
      const progress = Math.max(-1, Math.min(1, offset / viewportHeight)); // -1 to 1
      
      const bg = section.querySelector('.parallax-bg') as HTMLElement;
      if (!bg) return;
      
      const type = section.getAttribute('data-parallax-type');
      
      switch(type) {
        case 'zoom-out':
          // Starts zoomed in, zooms out as you scroll away
          const scale1 = 1.15 - (Math.abs(progress) * 0.1);
          const translateY1 = progress * 30;
          bg.style.transform = `scale(${scale1}) translateY(${translateY1}px)`;
          break;
          
        case 'pan-right':
          // Pans from left to right
          const translateX = progress * -80;
          const scale2 = 1.1;
          bg.style.transform = `scale(${scale2}) translateX(${translateX}px)`;
          break;
          
        case 'zoom-in':
          // Zooms in as section comes into view
          const scale3 = 1 + (1 - Math.abs(progress)) * 0.15;
          bg.style.transform = `scale(${scale3})`;
          break;
      }
    });
  }
  
  // Content animation on intersection
  const observerOptions = {
    root: scroller,
    threshold: 0.3
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const contents = entry.target.querySelectorAll('.content-animate');
      
      if (entry.isIntersecting) {
        contents.forEach((el) => {
          el.classList.add('is-visible');
        });
      }
    });
  }, observerOptions);

  sections.forEach(section => observer.observe(section));
  
  // Listen to scroll
  scroller?.addEventListener('scroll', updateParallax, { passive: true });
  
  // Initial call
  updateParallax();
</script>

<style>
  /* Parallax background base */
  .parallax-bg {
    will-change: transform;
    transition: transform 1s ease-out;
  }
  
  /* Content animation */
  .content-animate {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 1s ease-out, transform 1s ease-out;
    transition-delay: var(--delay, 1s);
  }
  
  .content-animate.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* First section content should be visible immediately */
  #section-hero .content-animate {
    animation: fadeUp 1s ease-out forwards;
    animation-delay: var(--delay, 1s);
  }
  
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
